<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Waterfall by bingdian</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Waterfall</h1>
        <p class="header">jquery waterfall plugin,like Pinterest. </p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/bingdian/waterfall/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/bingdian/waterfall/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/bingdian/waterfall">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/bingdian">bingdian</a></p>


      </header>
      <section>
        <h1>Waterfall</h1>

<p>jquery waterfall plugin,like <a href="http://pinterest.com/">Pinterest</a>、<a href="http://huaban.com/">huaban.com</a>、<a href="http://faxianla.com/">faxianla.com</a></p>

<p><a href="index.html">En</a> <a href="index-zh.html">中文</a></p>

<h2>Documentation</h2>

<h3>Download</h3>

<p>Download the latest <a href="https://github.com/bingdian/waterfall/archive/master.tar.gz">waterfall plugin</a>。</p>

<h3>Getting started</h3>

<p>Markup:</p>

<pre><code>&lt;div id="container"&gt;&lt;/div&gt;
</code></pre>

<p>Add jQuery, <a href="http://handlebarsjs.com/">handlebars</a> and the Waterfall script. (You can also use other javascript template,see <a href="http://wlog.cn/demo/waterfall/mustache.html">demo</a>)</p>

<pre><code>&lt;script src="/path/jquery.min.js"&gt;&lt;/script&gt;
&lt;script src="/path/handlebars.js"&gt;&lt;/script&gt;
&lt;script src="/path/waterfall.min.js"&gt;&lt;/script&gt;
</code></pre>

<p>template:</p>

<pre><code>&lt;script id="waterfall-tpl" type="text/x-handlebars-template"&gt;
    //template content
&lt;/script&gt;
</code></pre>

<p>script:</p>

<pre><code>$('#container').waterfall({
	itemCls: 'waterfall-item', 
	prefix: 'waterfall',
	fitWidth: true, 
	colWidth: 240, 
	gutterWidth: 10,
	gutterHeight: 10,
	align: 'center',
	minCol: 1, 
	maxCol: undefined, 
	maxPage: undefined, 
	bufferPixel: -50, 
	containerStyle: {
		position: 'relative'
	},
	resizable: true, 
	isFadeIn: false,
	isAnimated: false,
	animationOptions: { 
	},
	isAutoPrefill: true,
	checkImagesLoaded: true,
	path: undefined,
	dataType: 'json', 
	params: {}, 
	
	loadingMsg: '&lt;div style="text-align:center;padding:10px 0; color:#999;">&lt;img src="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Li4tra2u7u7jk5OTMzM1hYWJubm4CAgMjIyE9PT29vb6KiooODg8vLy1JSUjc3N3Jycuvr6+Dg4Pb29mBgYOPj4/X19cXFxbOzs9XV1fHx8TMzMzMzMzMzMyH5BAkLAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7" alt="">&lt;br />Loading...&lt;/div>',
	
	state: { 
		isDuringAjax: false, 
		isProcessingData: false, 
		isResizing: false,
		curPage: 1 
	},

	// callbacks
	callbacks: {
		/*
		 * loadingStart
		 * @param {Object} loading $('#waterfall-loading')
		 */
		loadingStart: function($loading) {
			$loading.show();
			//console.log('loading', 'start');
		},
		
		/*
		 * loadingFinished
		 * @param {Object} loading $('#waterfall-loading')
		 * @param {Boolean} isBeyondMaxPage
		 */
		loadingFinished: function($loading, isBeyondMaxPage) {
			if ( !isBeyondMaxPage ) {
				$loading.fadeOut();
				//console.log('loading finished');
			} else {
				//console.log('loading isBeyondMaxPage');
				$loading.remove();
			}
		},
		
		/*
		 * loadingError
		 * @param {String} xhr , "end" "error"
		 */
		loadingError: function($message, xhr) {
			$message.html('Data load faild, please try again later.');
		},
		
		/*
		 * renderData
		 * @param {String} data
		 * @param {String} dataType , "json", "jsonp", "html"
		 */
		renderData: function (data, dataType) {
			var tpl,
				template;
				
			if ( dataType === 'json' ||  dataType === 'jsonp'  ) { // json or jsonp format
				tpl = $('#waterfall-tpl').html();
				template = Handlebars.compile(tpl);
				
				return template(data);
			} else { // html format
				return data;
			}
		}
	},
	
	debug: false
});
</code></pre>

<h3>options</h3>

<table>
<tr>
<th>Name</th>
        <th>Type</th>
        <th>Default value</th>
        <th>Description</th>
    </tr>
<tr>
<td>itemCls</td>
        <td>String</td>
        <td>'waterfall-item'</td>
        <td>the waterfall brick element class</td>
    </tr>
<tr>
<td>prefix</td>
        <td>String</td>
        <td>'waterfall'</td>
        <td>waterfall elements prefix</td>
    </tr>
<tr>
<td>fitWidth</td>
        <td>Boolean</td>
        <td>true</td>
        <td>fit the parent element width</td>
    </tr>
<tr>
<td>colWidth</td>
        <td>Integer</td>
        <td>240</td>
        <td>column width</td>
    </tr>
<tr>
<td>gutterWidth</td>
        <td>Integer</td>
        <td>10</td>
        <td>the waterfall brick element horizontal gutter</td>
    </tr>
<tr>
<td>gutterHeight</td>
        <td>Integer</td>
        <td>10</td>
        <td>the waterfall brick element vertical gutter</td>
    </tr>
<tr>
<td>align</td>
        <td>String</td>
        <td>'center'</td>
        <td>'align', 'left', 'right'</td>
    </tr>
<tr>
<td>minCol</td>
        <td>Integer</td>
        <td>1</td>
        <td>min columns</td>
    </tr>
<tr>
<td>maxCol</td>
        <td>Integer</td>
        <td>undefined</td>
        <td>max columns</td>
    </tr>
<tr>
<td>maxPage</td>
        <td>Integer</td>
        <td>undefined</td>
        <td>max page</td>
    </tr>
<tr>
<td>bufferPixel</td>
        <td>Integer</td>
        <td>-50</td>
        <td>decrease this number if you want infscroll to fire quicker</td>
    </tr>
<tr>
<td>containerStyle</td>
        <td>Object</td>
        <td>{position: 'relative'}</td>
        <td>the waterfall container style</td>
    </tr>
<tr>
<td>resizable</td>
        <td>Boolean</td>
        <td>true</td>
        <td>triggers layout when browser window is resized</td>
    </tr>
<tr>
<td>isFadeIn</td>
        <td>Boolean</td>
        <td>false</td>
        <td>append html effect</td>
    </tr>
<tr>
<td>isAnimated</td>
        <td>Boolean</td>
        <td>false</td>
        <td>triggers animate when browser window is resized </td>
    </tr>
<tr>
<td>animationOptions</td>
        <td>Object</td>
        <td>{}</td>
        <td>animation options</td>
    </tr>
<tr>
<td>isAutoPrefill</td>
        <td>Boolean</td>
        <td>true</td>
        <td>When the document is smaller than the window, load data until the document is larger</td>
    </tr>
<tr>
<td>checkImagesLoaded</td>
        <td>Boolean</td>
        <td>true</td>
        <td>triggers layout when images loaded. Suggest false</td>
    </tr>
<tr>
<td>path</td>
        <td>Array, Function</td>
        <td>undefined</td>
        <td>Either parts of a URL as an array (e.g. ["/popular/page/", "/"] or a function that takes in the page number and returns a URL(e.g. function(page) { return '/populr/page/' + page; })</td>
    </tr>
<tr>
<td>dataType</td>
        <td>String</td>
        <td>'json'</td>
        <td>'json', 'jsonp', 'html'</td>
    </tr>
<tr>
<td>params</td>
        <td>Object</td>
        <td>{}</td>
        <td>params,{type: "popular", tags: "travel", format: "json"} =&gt; "type=popular&amp;tags=travel&amp;format=json"</td>
    </tr>
<tr>
<td>loadingMsg</td>
        <td>html</td>
        <td></td>
        <td>loading html</td>
    </tr>
<tr>
<td>callbacks</td>
        <td>Object</td>
        <td></td>
        <td>callback</td>
    </tr>
<tr>
<td>debug</td>
        <td>Boolean</td>
        <td>false</td>
        <td>enable debug</td>
    </tr>
</table><p>loadingMsg:</p>

<pre><code>'&amp;lt;div style="text-align:center;padding:10px 0; color:#999;"&gt;&amp;lt;img src="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Li4tra2u7u7jk5OTMzM1hYWJubm4CAgMjIyE9PT29vb6KiooODg8vLy1JSUjc3N3Jycuvr6+Dg4Pb29mBgYOPj4/X19cXFxbOzs9XV1fHx8TMzMzMzMzMzMyH5BAkLAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7" alt=""&gt;&amp;lt;br /&gt;Loading...&amp;lt;/div&gt;'
</code></pre>

<p>callbacks:</p>

<pre><code>callbacks: {
    /*
     * loading start 
     * @param {Object} loading $('#waterfall-loading')
     */
    loadingStart: function($loading) {
        $loading.show();
    },

    /*
     * loading finished
     * @param {Object} loading $('#waterfall-loading')
     * @param {Boolean} isBeyondMaxPage
     */
    loadingFinished: function($loading, isBeyondMaxPage) {
        if ( !isBeyondMaxPage ) {
            $loading.fadeOut();
        } else {
            $loading.remove();
        }
    },

    /*
     * loading error
     * @param {String} xhr , "end" "error"
     */
    loadingError: function($message, xhr) {
        $message.html('Data load faild, please try again later.');
    },

    /*
     * render data
     * @param {String} data
     * @param {String} dataType , "json", "jsonp", "html"
     */
    renderData: function (data, dataType) {
        var tpl,
            template;

        if ( dataType === 'json' ||  dataType === 'jsonp'  ) { // json or jsonp format
            tpl = $('#waterfall-tpl').html();
            template = Handlebars.compile(tpl);

            return template(data);
        } else { // html format
            return data;
        }
    }
}
</code></pre>

<h3>method</h3>

<pre><code>$('#container').waterfall( 'methodName', [optionalParameters] );
</code></pre>

<p><strong>prepend</strong></p>

<pre><code>$('#container').waterfalll('prepend', $content, callback);
</code></pre>

<p><strong>append</strong></p>

<pre><code>$('#container').waterfalll('append', $content, callback);
</code></pre>

<p><strong>removeItems</strong></p>

<pre><code>$('#container').waterfalll('removeItems', $items, callback);
</code></pre>

<p><strong>reLayout</strong></p>

<pre><code>$('#container').waterfalll('reLayout', $content, callback);
</code></pre>

<p><strong>option</strong></p>

<pre><code>$('#container').waterfalll('option', options, callback);
</code></pre>

<h2>Demos</h2>

<ul>
<li><a href="http://wlog.cn/demo/waterfall/infinitescroll.html">infinitescroll</a></li>
<li><a href="http://wlog.cn/demo/waterfall/finitescroll.html">finitescroll</a></li>
<li><a href="http://wlog.cn/demo/waterfall/custom-width.html">custom width</a></li>
<li><a href="http://wlog.cn/demo/waterfall/min-max-columns.html">min-max-columns</a></li>
<li><a href="http://wlog.cn/demo/waterfall/animate.html">resize animate</a></li>
<li><a href="http://wlog.cn/demo/waterfall/fadein.html">fadeIn</a></li>
<li><a href="http://wlog.cn/demo/waterfall/fixed-left-or-right.html">fix brick left or right</a></li>
<li><a href="http://wlog.cn/demo/waterfall/mustache.html">use mustache template</a></li>
<li><a href="http://wlog.cn/demo/waterfall/html.html">html datatype</a></li>
<li><a href="http://wlog.cn/demo/waterfall/jsonp.html">jsonp datatype</a></li>
<li><a href="http://wlog.cn/demo/waterfall/methods.html">methods</a></li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-1245097-16");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>