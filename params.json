{"name":"Waterfall","tagline":"jquery waterfall plugin,like Pinterest. ","body":"# Waterfall\r\n\r\n瀑布流布局插件, 类似于 [Pinterest](http://pinterest.com/)、[花瓣](http://huaban.com/)、[发现啦](http://faxianla.com/)。\r\n\r\n[En](index.html) [中文](index-zh.html)\r\n\r\n## 文档\r\n\r\n### 下载\r\n\r\n下载[waterfall插件](https://github.com/bingdian/waterfall/archive/master.tar.gz)最新版本。\r\n\r\n### 使用\r\n\r\n[min]: https://raw.github.com/bingdian/waterfall/master/build/waterfall.min.js\r\n[max]: https://raw.github.com/bingdian/waterfall/master/build/waterfall.js\r\n\r\nhtml：\r\n\r\n    <div id=\"container\"></div>\r\n    \r\n引入jquery，handlebars和waterfall(注：waterfall默认返回json格式数据并使用[handlebars](http://handlebarsjs.com/)模板渲染json数据，你也可以在options中配置使用其它javascript模板如[mustache](http://mustache.github.com/)解析json数据或者直接返回html):\r\n\r\n    <script src=\"/path/jquery.min.js\"></script>\r\n    <script src=\"/path/handlebars.js\"></script>\r\n    <script src=\"/path/waterfall.min.js\"></script>\r\n\r\ntemplate:\r\n\r\n    <script id=\"waterfall-tpl\" type=\"text/x-handlebars-template\">\r\n        //template content\r\n    </script>\r\n\r\nscript:\r\n    \r\n    $('#container').waterfall(options);\r\n    \r\n### options\r\n\r\n<table>\r\n    <tr>\r\n        <th class=\"min-th\">Name</th>\r\n\t\t<th class=\"min-th\">Type</th>\r\n\t\t<th class=\"min-th\">Default value</th>\r\n\t\t<th>Description</th>\r\n    </tr>\r\n    <tr>\r\n        <td>itemCls</td>\r\n        <td>String</td>\r\n        <td>'waterfall-item'</td>\r\n        <td>瀑布流数据块class</td>\r\n    </tr>\r\n    <tr>\r\n        <td>prefix</td>\r\n        <td>String</td>\r\n        <td>'waterfall'</td>\r\n        <td>瀑布流元素前辍</td>\r\n    </tr>\r\n    <tr>\r\n        <td>fitWidth</td>\r\n        <td>Boolean</td>\r\n        <td>true</td>\r\n        <td>是否自适应父元素宽度</td>\r\n    </tr>\r\n    <tr>\r\n        <td>colWidth</td>\r\n        <td>Integer</td>\r\n        <td>240</td>\r\n        <td>瀑布流每列的宽度</td>\r\n    </tr>\r\n    <tr>\r\n        <td>gutterWidth</td>\r\n        <td>Integer</td>\r\n        <td>10</td>\r\n        <td>数据块水平间距</td>\r\n    </tr>\r\n    <tr>\r\n        <td>gutterHeight</td>\r\n        <td>Integer</td>\r\n        <td>10</td>\r\n        <td>数据块垂直间距</td>\r\n    </tr>\r\n    <tr>\r\n        <td>align</td>\r\n        <td>String</td>\r\n        <td>'center'</td>\r\n        <td>数据块相对于容器对齐方式，'align', 'left', 'right'</td>\r\n    </tr>\r\n    <tr>\r\n        <td>minCol</td>\r\n        <td>Integer</td>\r\n        <td>1</td>\r\n        <td>数据块最小列数</td>\r\n    </tr>\r\n    <tr>\r\n        <td>maxCol</td>\r\n        <td>Integer</td>\r\n        <td>undefined</td>\r\n        <td>数据块最多显示列数,默认undefined，最大列数无限制</td>\r\n    </tr>\r\n    <tr>\r\n        <td>maxPage</td>\r\n        <td>Integer</td>\r\n        <td>undefined</td>\r\n        <td>最多显示多少页数据,默认undefined，无限下拉</td>\r\n    </tr>\r\n    <tr>\r\n        <td>bufferPixel</td>\r\n        <td>Integer</td>\r\n        <td>-50</td>\r\n        <td>滚动时, 窗口底部到瀑布流最小高度列的距离 > bufferPixel时, 自动加载新数据</td>\r\n    </tr>\r\n    <tr>\r\n        <td>containerStyle</td>\r\n        <td>Object</td>\r\n        <td>{position: 'relative'}</td>\r\n        <td>瀑布流默认样式</td>\r\n    </tr>\r\n    <tr>\r\n        <td>resizable</td>\r\n        <td>Boolean</td>\r\n        <td>true</td>\r\n        <td>缩放时是否触发数据重排</td>\r\n    </tr>\r\n    <tr>\r\n        <td>isFadeIn</td>\r\n        <td>Boolean</td>\r\n        <td>false</td>\r\n        <td>新插入数据是否使用fade动画</td>\r\n    </tr>\r\n    <tr>\r\n        <td>isAnimated</td>\r\n        <td>Boolean</td>\r\n        <td>false</td>\r\n        <td>resize时数据是否显示动画</td>\r\n    </tr>\r\n    <tr>\r\n        <td>animationOptions</td>\r\n        <td>Object</td>\r\n        <td>{}</td>\r\n        <td>resize动画效果，isAnimated为true时有效</td>\r\n    </tr>\r\n    <tr>\r\n        <td>isAutoPrefill</td>\r\n        <td>Boolean</td>\r\n        <td>true</td>\r\n        <td>当文档小于窗口可见区域，自动加载数据</td>\r\n    </tr>\r\n    <tr>\r\n        <td>checkImagesLoaded</td>\r\n        <td>Boolean</td>\r\n        <td>true</td>\r\n        <td>是否图片加载完成后开始排列数据块。如果直接后台输出图片尺寸，可设置为false，强烈建议从后台输出图片尺寸，设置为false</td>\r\n    </tr>\r\n    <tr>\r\n        <td>path</td>\r\n        <td>Array, Function</td>\r\n        <td>undefined</td>\r\n        <td>瀑布流数据分页url，可以是数组如[\"/popular/page/\", \"/\"] => \"/popular/page/1/\"，或者是根据分页返回一个url方法如：function(page) { return '/populr/page/' + page; } => \"/popular/page/1/\"</td>\r\n    </tr>\r\n    <tr>\r\n        <td>dataType</td>\r\n        <td>String</td>\r\n        <td>'json'</td>\r\n        <td>瀑布流返回数据格式，'json', 'jsonp', 'html'</td>\r\n    </tr>\r\n    <tr>\r\n        <td>params</td>\r\n        <td>Object</td>\r\n        <td>{}</td>\r\n        <td>瀑布流数据请求参数,{type: \"popular\", tags: \"travel\", format: \"json\"} => \"type=popular&tags=travel&format=json\"</td>\r\n    </tr>\r\n    <tr>\r\n        <td>loadingMsg</td>\r\n        <td>Html</td>\r\n        <td>见下面代码</td>\r\n        <td>加载提示进度条，html</td>\r\n    </tr>\r\n    <tr>\r\n        <td>callbacks</td>\r\n        <td>Object</td>\r\n        <td>见下面代码</td>\r\n        <td>callback</td>\r\n    </tr>\r\n    <tr>\r\n        <td>debug</td>\r\n        <td>Boolean</td>\r\n        <td>false</td>\r\n        <td>开启debug</td>\r\n    </tr>\r\n</table>\r\n\r\nloadingMsg:\r\n\r\n    '&lt;div style=\"text-align:center;padding:10px 0; color:#999;\">&lt;img src=\"data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Li4tra2u7u7jk5OTMzM1hYWJubm4CAgMjIyE9PT29vb6KiooODg8vLy1JSUjc3N3Jycuvr6+Dg4Pb29mBgYOPj4/X19cXFxbOzs9XV1fHx8TMzMzMzMzMzMyH5BAkLAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7\" alt=\"\">&lt;br />Loading...&lt;/div>'\r\n\r\ncallbacks:\r\n\r\n    callbacks: {\r\n        /*\r\n         * ajax请求开始之前\r\n         * @param {Object} loading $('#waterfall-loading')\r\n         */\r\n        loadingStart: function($loading) {\r\n            $loading.show();\r\n        },\r\n        \r\n        /*\r\n         * ajax请求加载完成\r\n         * @param {Object} loading $('#waterfall-loading')\r\n         * @param {Boolean} isBeyondMaxPage\r\n         */\r\n        loadingFinished: function($loading, isBeyondMaxPage) {\r\n            if ( !isBeyondMaxPage ) {\r\n                $loading.fadeOut();\r\n            } else {\r\n                $loading.remove();\r\n            }\r\n        },\r\n        \r\n        /*\r\n         * ajax请求出错误\r\n         * @param {String} xhr , \"end\" \"error\"\r\n         */\r\n        loadingError: function($message, xhr) {\r\n            $message.html('Data load faild, please try again later.');\r\n        },\r\n        \r\n        /*\r\n         * 处理ajax返回数方法\r\n         * @param {String} data\r\n         * @param {String} dataType , \"json\", \"jsonp\", \"html\"\r\n         */\r\n        renderData: function (data, dataType) {\r\n            var tpl,\r\n                template;\r\n                \r\n            if ( dataType === 'json' ||  dataType === 'jsonp'  ) { // json或jsonp格式\r\n                tpl = $('#waterfall-tpl').html();\r\n                template = Handlebars.compile(tpl);\r\n                \r\n                return template(data);\r\n            } else { // html格式\r\n                return data;\r\n            }\r\n        }\r\n    }\r\n            \r\n\r\n### method\r\n\r\n    $('#container').waterfall( 'methodName', [optionalParameters] );\r\n\r\n**prepend**\r\n\r\n    $('#container').waterfalll('prepend', $content, callback);\r\n    \r\n**append**\r\n    \r\n    $('#container').waterfalll('append', $content, callback);\r\n    \r\n**removeItems**\r\n    \r\n    $('#container').waterfalll('removeItems', $items, callback);\r\n\r\n**reLayout**\r\n\r\n    $('#container').waterfalll('reLayout', $content, callback);\r\n\r\n**option**\r\n    \r\n    $('#container').waterfalll('option', options, callback);\r\n    \r\n## Demos\r\n \r\n * [无限下拉数据](http://wlog.cn/demo/waterfall/infinitescroll.html)\r\n * [有限下拉数据完成后显示分页](http://wlog.cn/demo/waterfall/finitescroll.html)\r\n * [瀑布流固定宽度](http://wlog.cn/demo/waterfall/custom-width.html)\r\n * [自定义最大列最小列](http://wlog.cn/demo/waterfall/min-max-columns.html)\r\n * [resize动画效果](http://wlog.cn/demo/waterfall/animate.html)\r\n * [加载数据时fadeIn效果](http://wlog.cn/demo/waterfall/fadein.html)\r\n * [左侧或右侧固定列](http://wlog.cn/demo/waterfall/fixed-left-or-right.html)\r\n * [使用其它模板如mustache解析json数据](http://wlog.cn/demo/waterfall/mustache.html)\r\n * [ajax加载html格式](http://wlog.cn/demo/waterfall/html.html)\r\n * [ajax加载jsonp格式](http://wlog.cn/demo/waterfall/jsonp.html)\r\n * [methods](http://wlog.cn/demo/waterfall/methods.html)","google":"UA-1245097-16","note":"Don't delete this file! It's used internally to help with page regeneration."}